# vLLM ROCm Configuration
# Based on set-bestbox testing results

# Model Configuration
VLLM_MODEL_PATH=/models/Qwen/Qwen3-30B-A3B-Instruct-2507
VLLM_MODEL_NAME=qwen3-30b
VLLM_PORT=8001

# ROCm Settings (gfx1151 - Strix Halo)
PYTORCH_ROCM_ARCH=gfx1151
HSA_OVERRIDE_GFX_VERSION=11.0.0
FLASH_ATTENTION_TRITON_AMD_ENABLE=TRUE
HIP_VISIBLE_DEVICES=0
HSA_ENABLE_SDMA=1

# Performance Profile: Stability-First
# Based on benchmark results: 76 tok/s, 0% failures
VLLM_DTYPE=float16
VLLM_GPU_MEMORY_UTIL=0.90
VLLM_MAX_MODEL_LEN=2048
VLLM_MAX_NUM_SEQS=8
VLLM_MAX_NUM_BATCHED_TOKENS=4096
VLLM_ENFORCE_EAGER=true  # Required for gfx1151 stability

# Cache Paths
MODELSCOPE_CACHE=/models
HF_HOME=/root/.cache/huggingface
TRANSFORMERS_CACHE=/root/.cache/huggingface/hub

# Logging
VLLM_LOG_LEVEL=INFO
VLLM_DISABLE_LOG_REQUESTS=true

# Health Check
VLLM_HEALTH_CHECK_TIMEOUT=180  # 3 minutes for model load

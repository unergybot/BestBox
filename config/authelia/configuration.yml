---
server:
  address: 'tcp://0.0.0.0:9091'

log:
  level: 'info'

theme: 'dark'

jwt_secret: 'file:///config/secrets/jwt'

default_redirection_url: 'http://localhost:3000'

totp:
  disable: true
  issuer: 'bestbox.local'

webauthn:
  disable: true

authentication_backend:
  file:
    path: '/config/users_database.yml'

session:
  secret: 'file:///config/secrets/session'
  cookies:
    - domain: 'localhost'
      authelia_url: 'http://localhost:9091'
      default_redirection_url: 'http://localhost:3000'
  redis:
    host: 'redis'
    port: 6379

regulation:
  max_retries: 5
  find_time: '2m'
  ban_time: '5m'

storage:
  encryption_key: 'file:///config/secrets/storage'
  local:
    path: '/var/lib/authelia/db.sqlite3'

notifier:
  filesystem:
    filename: '/var/lib/authelia/notification.txt'

access_control:
  default_policy: 'deny'
  rules:
    - domain: 'localhost'
      policy: 'bypass'
      resources:
        - '^/api/health$'
    - domain: 'localhost'
      policy: 'two_factor'
      subject:
        - 'group:admin'
        - 'group:engineer'
        - 'group:viewer'

identity_providers:
  oidc:
    hmac_secret: 'file:///config/secrets/jwt'
    issuer_private_key: 'file:///config/oidc_rsa_key.pem'
    clients:
      - id: 'bestbox-admin'
        description: 'BestBox Admin App'
        secret: '$pbkdf2-sha512$310000$c8p78n7pUMln0jzvd4aK4Q$JNRBzwAo0ek5qKn50cFzzvE9RfXCb/GfKNfxF6RxEg9vI0uG7qGZR7T/C8W1y5U4oFANhFP4J3Q5T7Xk0Bk7oA'
        public: false
        authorization_policy: 'two_factor'
        redirect_uris:
          - 'http://localhost:3000/en/admin/callback'
          - 'http://localhost:3000/zh/admin/callback'
          - 'http://localhost:3001/login/generic_oauth'
        scopes:
          - 'openid'
          - 'profile'
          - 'groups'
          - 'email'
        userinfo_signed_response_alg: 'none'
        token_endpoint_auth_method: 'client_secret_post'
      - id: 'grafana'
        description: 'Grafana Dashboard'
        secret: '$pbkdf2-sha512$310000$c8p78n7pUMln0jzvd4aK4Q$JNRBzwAo0ek5qKn50cFzzvE9RfXCb/GfKNfxF6RxEg9vI0uG7qGZR7T/C8W1y5U4oFANhFP4J3Q5T7Xk0Bk7oA'
        public: false
        authorization_policy: 'two_factor'
        redirect_uris:
          - 'http://localhost:3001/login/generic_oauth'
        scopes:
          - 'openid'
          - 'profile'
          - 'groups'
          - 'email'
